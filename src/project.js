System.register("chunks:///examples/water/water/test-water.js",["../../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var r,l,n,i,s,o,a,c,u,p,y,d,m,b,f,g,k,v,h,I,_,w;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,l=e.inherits,n=e.classCallCheck,i=e.possibleConstructorReturn,s=e.getPrototypeOf,o=e.initializerDefineProperty,a=e.assertThisInitialized,c=e.createClass},function(e){u=e.cclegacy,p=e._decorator,y=e.LabelComponent,d=e.director,m=e.Component}],execute:function(){u._RF.push({},"ed0acMPJF5Pz6nWCV0SEIZE","test-water",void 0),I=p.ccclass,_=p.property,w=p.type,e("TestWater",(b=I("TestWater"),f=_({animatable:!0}),g=w(y),b((r((v=function(e){function t(){var e,r;n(this,t);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return r=i(this,(e=s(t)).call.apply(e,[this].concat(c))),o(r,"skyIllumLabel",h,a(r)),r}return l(t,e),c(t,[{key:"start",value:function(){}},{key:"update",value:function(e){this.skyIllumLabel&&(this.skyIllumLabel.string=Math.round(this.skyIllum)+"")}},{key:"skyIllum",get:function(){return d.getRunningScene().globals.ambient.skyIllum},set:function(e){d.getRunningScene().globals.ambient.skyIllum=e}}]),t}(m)).prototype,"skyIllum",[f],Object.getOwnPropertyDescriptor(v.prototype,"skyIllum"),v.prototype),h=r(v.prototype,"skyIllumLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=v))||k)),u._RF.pop()}}}));

System.register("chunks:///main-menu/scripts/scenelist.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var r,i,n,a,s,c,o,l,u,f,p,d,v,h,y,_,b,m,g,P,C;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inherits,n=e.classCallCheck,a=e.possibleConstructorReturn,s=e.getPrototypeOf,c=e.initializerDefineProperty,o=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,f=e._decorator,p=e.Prefab,d=e.instantiate,v=e.Component}],execute:function(){u._RF.push({},"56ce0MAdDJH2qBewyMuTQnW","scenelist",void 0),g=f.ccclass,P=f.property,e("sceneArray",C=[]),e("SceneManager",(h=g("SceneManager"),y=P({type:p}),h((m=r((b=function(e){function t(){var e,r;n(this,t);for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return r=a(this,(e=s(t)).call.apply(e,[this].concat(l))),c(r,"itemPrefab",m,o(r)),r}return i(t,e),l(t,[{key:"onLoad",value:function(){if(this.itemPrefab){C.sort((function(e,t){return e.indexOf("test")?-1:t.indexOf("test")?1:0}));for(var e=0;e<C.length;e++){var t=d(this.itemPrefab);this.node.addChild(t)}}}},{key:"start",value:function(){}}]),t}(v)).prototype,"itemPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=b))||_)),u._RF.pop()}}}));

System.register("chunks:///main-menu/scripts/backbutton.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./scenelist.js"],(function(e,t){var n,o,c,s,l,i,u,r,a,d,_,f,p,v,h,k,I,y,g;return e({_dec:void 0,_class:void 0,_class2:void 0,_temp:void 0}),{setters:[function(e){n=e.inherits,o=e.classCallCheck,c=e.possibleConstructorReturn,s=e.getPrototypeOf,l=e.createClass},function(e){i=e.cclegacy,u=e._decorator,r=e.Vec3,a=e.game,d=e.ScrollViewComponent,_=e.director,f=e.LayoutComponent,p=e.Component},function(e){v=e.sceneArray}],execute:function(){i._RF.push({},"b20edYWY5pMo6v9nvpXwDsb","backbutton",void 0),g=u.ccclass,u.property,e("BackButton",(h=g("BackButton"),h((y=I=function(e){function t(){return o(this,t),c(this,s(t).apply(this,arguments))}return n(t,e),l(t,[{key:"__preload",value:function(){for(var e=a._sceneInfos,t=0,n=0,o="",c=0;c<e.length;c++)t=(o=e[c].url).lastIndexOf("/")+1,n=o.lastIndexOf(".scene"),"testlist"!==(o=o.substring(t,n))&&v.push(o)}},{key:"start",value:function(){a.addPersistRootNode(this.node),t._scrollNode=this.node.getParent().getChildByPath("Canvas/ScrollView"),t._scrollNode&&(t._scrollCom=t._scrollNode.getComponent(d)),t._blockInput=this.node.getChildByName("BlockInput"),t._blockInput.active=!1,t._prevNode=this.node.getChildByName("PrevButton"),t._nextNode=this.node.getChildByName("NextButton"),t._prevNode&&t._nextNode&&t.refreshButton()}},{key:"backToList",value:function(){t._blockInput.active=!0,_.loadScene("testlist",function(){t._sceneIndex=-1,t.refreshButton(),t._scrollNode=this.node.getParent().getChildByPath("Canvas/ScrollView"),t._scrollNode&&(t._scrollCom=t._scrollNode.getComponent(d),t._scrollCom._content.getComponent(f).updateLayout(),t._scrollCom.scrollToOffset(t.offset,.1,!0)),t._blockInput.active=!1}.bind(this))}},{key:"nextscene",value:function(){t._blockInput.active=!0,this.updateSceneIndex(!0),_.loadScene(this.getSceneName(),(function(){t._blockInput.active=!1}))}},{key:"prescene",value:function(){t._blockInput.active=!0,this.updateSceneIndex(!1),_.loadScene(this.getSceneName(),(function(){t._blockInput.active=!1}))}},{key:"updateSceneIndex",value:function(e){e?t._sceneIndex+1>=v.length?t._sceneIndex=0:t._sceneIndex+=1:t._sceneIndex-1<0?t._sceneIndex=v.length-1:t._sceneIndex-=1}},{key:"getSceneName",value:function(){return v[t._sceneIndex]}}],[{key:"saveOffset",value:function(){t._scrollNode&&(t._offset=new r(0,t._scrollCom.getScrollOffset().y,0))}},{key:"saveIndex",value:function(e){t._sceneIndex=e,t.refreshButton()}},{key:"refreshButton",value:function(){-1===t._sceneIndex?(t._prevNode.active=!1,t._nextNode.active=!1):(t._prevNode.active=!0,t._nextNode.active=!0)}},{key:"offset",get:function(){return t._offset},set:function(e){t._offset=e}}]),t}(p),I._scrollNode=null,I._offset=new r,I._scrollCom=null,I._sceneIndex=-1,k=y))||k)),i._RF.pop()}}}));

System.register("chunks:///main-menu/scripts/listitem.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./scenelist.js","./backbutton.js"],(function(t,e){var n,i,s,o,a,l,c,r,u,h,d,p,m,f,b,v;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){n=t.inherits,i=t.classCallCheck,s=t.possibleConstructorReturn,o=t.getPrototypeOf,a=t.createClass},function(t){l=t.cclegacy,c=t._decorator,r=t.LabelComponent,u=t.ButtonComponent,h=t.director,d=t.Component},function(t){p=t.sceneArray},function(t){m=t.BackButton}],execute:function(){l._RF.push({},"dfb240gUk5FzLJW2+GbHJRv","listitem",void 0),v=c.ccclass,c.property,t("ListItem",(f=v("ListItem"),f(b=function(t){function e(){var t,n;i(this,e);for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];return(n=s(this,(t=o(e)).call.apply(t,[this].concat(l)))).index=-1,n._name="",n.label=null,n.button=null,n}return n(e,t),a(e,[{key:"onload",value:function(){}},{key:"start",value:function(){this.index=this.node.getSiblingIndex(),this._name="",this.node&&(this.label=this.node.getComponentInChildren(r),this.button=this.node.getComponent(u)),this.updateItem(this.index,p[this.index])}},{key:"loadScene",value:function(){m.saveOffset(),m.saveIndex(this.index),this.button.interactable=!1,h.loadScene(this._name,m.refreshButton)}},{key:"updateItem",value:function(t,e){this.index=t,this._name=e,this.label.string=e}}]),e}(d))||b)),l._RF.pop()}}}));

System.register("chunks:///shader-lib/depth-buffer/depth-buffer-component.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var n,o,r,c,s,u,p,i,f,l,a;return e({_dec:void 0,_class:void 0}),{setters:[function(e){n=e.inherits,o=e.createClass,r=e.classCallCheck,c=e.possibleConstructorReturn,s=e.getPrototypeOf},function(e){u=e.cclegacy,p=e._decorator,i=e.Component}],execute:function(){u._RF.push({},"b1b213GFHtA3be2hwMBnnKz","depth-buffer-component",void 0),a=p.ccclass,p.property,e("DepthBufferComponent",(f=a("DepthBufferComponent"),f(l=function(e){function t(){return r(this,t),c(this,s(t).apply(this,arguments))}return n(t,e),o(t,[{key:"start",value:function(){}}]),t}(i))||l)),u._RF.pop()}}}));

System.register("chunks:///shader-lib/utils/frame-buffer.js",["cc"],(function(e,t){var r,T,a,i,u;return e("createFrameBuffer",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=e,f=s._shadingWidth*c,h=s._shadingHeight*c;CC_EDITOR&&(f=t.width,h=t.height);var n=s._getTextureFormat(T.UNKNOWN,a.COLOR_ATTACHMENT),o=t.createTexture({type:i.TEX2D,usage:a.COLOR_ATTACHMENT,format:n,width:f,height:h}),g=t.createTextureView({texture:o,type:u.TV2D,format:n}),_=null;if(r){var d=s._getTextureFormat(T.UNKNOWN,a.DEPTH_STENCIL_ATTACHMENT),m=t.createTexture({type:i.TEX2D,usage:a.DEPTH_STENCIL_ATTACHMENT,format:d,width:f,height:h});_=t.createTextureView({texture:m,type:u.TV2D,format:d})}return t.createFramebuffer({renderPass:s._renderPasses.get(1),colorViews:[g],depthStencilView:_})})),{setters:[function(e){r=e.cclegacy,T=e.GFXFormat,a=e.GFXTextureUsageBit,i=e.GFXTextureType,u=e.GFXTextureViewType}],execute:function(){r._RF.push({},"10cc1A5Dt1ECLcytPWzLGYP","frame-buffer",void 0),r._RF.pop()}}}));

System.register("chunks:///shader-lib/depth-buffer/depth-buffer-ubo.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var n,a,i,o;return{setters:[function(e){n=e.classCallCheck},function(e){a=e.cclegacy,i=e.GFXType}],execute:function(){a._RF.push({},"0f3784s2GdIYoKaMCjSoRqZ","depth-buffer-ubo",void 0),e("UBOLitShadow",o=function e(){n(this,e),this.view=new Float32Array(e.COUNT)}),o.SIZE=4*(o.COUNT=(o.LIT_SHADOW_PARAMS=(o.LIT_SHADOW_MAT_VIEW_PROJ_OFFSET=0)+16)+4),o.BLOCK={binding:0,name:"SL_LIT_SHADOW",members:[{name:"sl_litShadowMatViewProj",type:i.MAT4,count:1},{name:"sl_litShadowParams",type:i.FLOAT4,count:1}]},a._RF.pop()}}}));

System.register("chunks:///shader-lib/depth-buffer/depth-buffer-stage.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./depth-buffer-component.js","../utils/frame-buffer.js","./depth-buffer-ubo.js"],(function(e,r){var t,i,n,u,s,f,a,d,h,o,c,l,_,p,b,g,v,B,m,y,S,R;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){t=e.inherits,i=e.classCallCheck,n=e.possibleConstructorReturn,u=e.getPrototypeOf,s=e.createClass,f=e.get,a=e.createForOfIteratorHelper},function(e){d=e.cclegacy,h=e._decorator,o=e.GFXBufferUsageBit,c=e.GFXMemoryUsageBit,l=e.GFXBindingType,_=e.Mat4,p=e.RenderStage},function(e){b=e.DepthBufferComponent},function(e){g=e.createFrameBuffer},function(e){v=e.UBOLitShadow}],execute:function(){d._RF.push({},"07f3fd1g65F8pngcF+y7Rzd","depth-buffer-stage",void 0),y=h.ccclass,h.property,S=[{r:1,g:1,b:1,a:1}],R=[],e("DepthBufferStage",(B=y("DepthBufferStage"),B(m=function(e){function r(){var e,t;i(this,r);for(var s=arguments.length,f=new Array(s),a=0;a<s;a++)f[a]=arguments[a];return(t=n(this,(e=u(r)).call.apply(e,[this].concat(f))))._psos=[],t._currentUboBinding=null,t._currentDepthBuffer=null,t._depthBuffers=new Map,t}return t(r,e),s(r,[{key:"activate",value:function(e){f(u(r.prototype),"activate",this).call(this,e),this.createCmdBuffer()}},{key:"destroy",value:function(){this._cmdBuff&&(this._cmdBuff.destroy(),this._cmdBuff=null)}},{key:"sortRenderQueue",value:function(){var e=this._currentDepthBuffer.colorViews[0];this._renderQueues.forEach(this.renderQueueClearFunc);for(var r=this._pipeline.renderObjects,t=0;t<r.length;++t)for(var i=r[t],n=0;n<i.model.subModelNum;n++)for(var u=0;u<i.model.getSubModel(n).passes.length;u++)for(var s=0;s<this._renderQueues.length;s++){var f=!1,a=i.model.getSubModel(n).passes[u];if(this._renderQueues[s].insertRenderPass(i,n,u)&&(a.binded_sl_lit_shadow||(a.bindBuffer(v.BLOCK.binding,this._currentUboBinding.buffer),f=!0,a.binded_sl_lit_shadow=!0)),!a.binded_sl_depthTexture){var d=a.getBinding("sl_depthTexture");d&&(a.bindTextureView(d,e),f=!0,a.binded_sl_depthTexture=!0)}f&&a.update()}this._renderQueues.forEach(this.renderQueueSortFunc)}},{key:"switchDepthBuffer",value:function(e){var r=this._depthBuffers.get(e);if(!r){var t=this.pipeline.device.createBuffer({usage:o.UNIFORM|o.TRANSFER_DST,memUsage:c.HOST|c.DEVICE,size:v.SIZE}),i=new v,n={type:l.UNIFORM_BUFFER,blockInfo:v.BLOCK,buffer:t,ubo:i};r={buffer:g(this._pipeline,this._device,!0),binding:n},this._depthBuffers.set(e,r)}this._currentUboBinding=r.binding,this._currentDepthBuffer=r.buffer}},{key:"updateCameraMatToUBO",value:function(e){var r=this._currentUboBinding,t=r.ubo.view;_.toArray(t,e.matViewProj,v.LIT_SHADOW_MAT_VIEW_PROJ_OFFSET),t[v.LIT_SHADOW_PARAMS]=e.nearClip,t[v.LIT_SHADOW_PARAMS+1]=e.farClip,t[v.LIT_SHADOW_PARAMS+2]=0,r.buffer.update(t)}},{key:"render",value:function(e){var r=e.camera;if(CC_EDITOR){if("Editor Camera"!==e.name)return}else{var t=r.node.getComponent(b);if(!t||!t.enabled)return}this.switchDepthBuffer(e),this.updateCameraMatToUBO(r),this.sortRenderQueue();var i=this._cmdBuff;i.begin();var n=r.viewport;this._renderArea.x=n.x*r.width,this._renderArea.y=n.y*r.height;var u=this._currentDepthBuffer;this._renderArea.width=r.width,this._renderArea.height=r.height,i.beginRenderPass(u,this._renderArea,r.clearFlag,S,r.clearDepth,r.clearStencil);for(var s=0;s<this._renderQueues.length;s++)i.execute(this._renderQueues[s].cmdBuffs.array,this._renderQueues[s].cmdBuffCount);i.endRenderPass(),i.end(),R.length=0,R[0]=i,this._device.queue.submit(R)}},{key:"resize",value:function(e,r){this.rebuild()}},{key:"rebuild",value:function(){var e,r=a(this._depthBuffers);try{for(r.s();!(e=r.n()).done;){e.value[1].buffer.destroy()}}catch(e){r.e(e)}finally{r.f()}this._depthBuffers.clear()}}]),r}(p))||m)),d._RF.pop()}}}));

System.register("chunks:///shader-lib/post-process/editor/post-process-renderer-materials.js",["cc"],(function(e,r){var t,n,o,s,c,i,a,u,d,l,p,f,m;return{setters:[function(e){t=e.cclegacy,n=e.game,o=e.Game,s=e.AssetLibrary}],execute:function(){if(t._RF.push({},"c9497JPexdIBagaxckT4gsC","post-process-renderer-materials",void 0),c=new Map,CC_EDITOR)for(i=window.require("globby"),a=window.require("path"),u=window.require("fs-extra"),d=require("electron"),l=d.remote.getGlobal("Editor").Project.path,p=i.sync(a.join(l,"**/post-process/**/*.mtl")),f=function(e){var r=p[e],t=a.basename(r).replace(a.extname(r),""),i=r+".meta";if(!u.existsSync(i))return"continue";var d=void 0;try{d=u.readJSONSync(i)}catch(e){cc.error(e)}if(!d)return"continue";c.set(t,null);var l=d.uuid;n.on(o.EVENT_ENGINE_INITED,(function(){s.loadAsset(l,(function(e,r){e?cc.error(e):c.set(t,r)}))}))},m=0;m<p.length;m++)f(m);t._RF.pop(),e("default",c)}}}));

System.register("chunks:///shader-lib/post-process/post-process-command.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(s,t){var c,e,n;return{setters:[function(s){c=s.classCallCheck},function(s){e=s.cclegacy}],execute:function(){e._RF.push({},"2050cxbcQRA/LTZ3IsRhCS4","post-process-command",void 0),n=function s(t){c(this,s),this.pass=null,this.inputCommands=[],this.outputName="",this.pass=t},e._RF.pop(),s("default",n)}}}));

System.register("chunks:///shader-lib/post-process/post-process-flow.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var s,o,r,c,n,i,l,u,p,a,d,f;return e({_dec:void 0,_class:void 0}),{setters:[function(e){s=e.inherits,o=e.createClass,r=e.classCallCheck,c=e.possibleConstructorReturn,n=e.getPrototypeOf,i=e.get},function(e){l=e.cclegacy,u=e._decorator,p=e.RenderFlow}],execute:function(){l._RF.push({},"39c01LTfQtF5LJVWtCJZPUJ","post-process-flow",void 0),f=u.ccclass,u.property,e("PostProcessFlow",(a=f("PostProcessFlow"),a(d=function(e){function t(){return r(this,t),c(this,n(t).apply(this,arguments))}return s(t,e),o(t,[{key:"render",value:function(e){e.camera.update(),this.pipeline.sceneCulling(e),this.pipeline.updateUBOs(e),i(n(t.prototype),"render",this).call(this,e)}},{key:"rebuild",value:function(){}},{key:"destroy",value:function(){}}]),t}(p))||d)),l._RF.pop()}}}));

System.register("chunks:///shader-lib/post-process/post-process-renderer.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./editor/post-process-renderer-materials.js","./post-process-command.js"],(function(e,t){var i,n,r,a,s,o,p,u,c,l,d,m,_,h,y,f,v,b,g,w,N,D,k,C,M,O,j,P,z,R,T,x,E,F;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_temp:void 0,_step:void 0}),{setters:[function(e){i=e.createForOfIteratorHelper,n=e.applyDecoratedDescriptor,r=e.classCallCheck,a=e.createClass,s=e.initializerDefineProperty},function(e){o=e.cclegacy,p=e._decorator,u=e.Enum,c=e.Material},function(e){l=e.default},function(e){d=e.default}],execute:function(){o._RF.push({},"8254f2IDhRCY58lvumEgkun","post-process-renderer",void 0),k=p.property,C=p.type,M=p.ccclass,O=function e(t,i){r(this,e),this.outputName="",this.inputNames=[],void 0!==t&&(this.outputName=t),void 0!==i&&(this.inputNames=i)},j={},P=0,z=i(l);try{for(z.s();!(R=z.n()).done;)T=R.value,j[T[0]]=P++}catch(e){z.e(e)}finally{z.f()}u(j),(x=new Map).set(1,new O("bloom_texture")),x.set(2,new O("",["bloom_texture"])),(E=new Map).set("bloom",x),m=M("PostProcessRenderer"),_=C(c),h=C(c),y=C(j),f=C(j),F=m((g=n((b=function(){function e(){r(this,e),this._passDefines=new Map,this._commandMap=new Map,this._commands=[],s(this,"_enabled",g,this),s(this,"_material",w,this),s(this,"_type",N,this),s(this,"_typeName",D,this),this._inited=!1}return a(e,[{key:"init",value:function(){this._inited||(this._inited=!0,this._updateType())}},{key:"_updateType",value:function(){if(CC_EDITOR){var e=j[this._type];this._material=l.get(e),this._typeName=e}this._passDefines=E.get(this._typeName),this._updateCommands()}},{key:"_updateMaterial",value:function(e){this._material=e,this._updateCommands()}},{key:"_updateCommands",value:function(){var e=this._commandMap,t=this._commands;t.length=0,e.clear();var i=this._material;if(i)for(var n=0;n<i.passes.length;n++){var r=i.passes[n],a=new d(r),s=this._passDefines&&this._passDefines.get(n);if(s&&(s.outputName&&(a.outputName=s.outputName,e.set(a.outputName,a)),s.inputNames&&s.inputNames.length>0))for(var o=0;o<s.inputNames.length;o++){var p=s.inputNames[o],u=e.get(p);u?a.inputCommands.push(u):cc.warn("Can not find input command with name ".concat(p))}t.push(a)}}},{key:"commands",get:function(){return this.init(),this._commands}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e}},{key:"material",get:function(){return this._material}},{key:"type",get:function(){return this._type},set:function(e){this._type=e,this._updateType()}}]),e}()).prototype,"_enabled",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),n(b.prototype,"enabled",[k],Object.getOwnPropertyDescriptor(b.prototype,"enabled"),b.prototype),w=n(b.prototype,"_material",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n(b.prototype,"material",[h],Object.getOwnPropertyDescriptor(b.prototype,"material"),b.prototype),N=n(b.prototype,"_type",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),n(b.prototype,"type",[f],Object.getOwnPropertyDescriptor(b.prototype,"type"),b.prototype),D=n(b.prototype,"_typeName",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=b))||v,o._RF.pop(),e("default",F)}}}));

System.register("chunks:///shader-lib/post-process/post-process-stage.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","../utils/frame-buffer.js"],(function(e,r){var t,i,n,s,a,u,o,d,h,l,f,c,p,_,g,m,v,b,B,A,y,S;return e({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(e){t=e.inherits,i=e.classCallCheck,n=e.possibleConstructorReturn,s=e.getPrototypeOf,a=e.createClass,u=e.get,o=e.typeof},function(e){d=e.cclegacy,h=e.pipeline,l=e._decorator,f=e.director,c=e.Director,p=e.GFXClearFlag,_=e.ForwardStage},function(e){g=e.createFrameBuffer}],execute:function(){d._RF.push({},"7f67cRmZeJIfJ75YmYXl1p1","post-process-stage",void 0),b=h.UBOGlobal,B=l.ccclass,l.property,A=[],y=function e(r,t,n){i(this,e),this.pass=null,this.input=null,this.output=null,this.pass=r,this.input=t,this.output=n},S=[{r:0,g:0,b:0,a:1}],e("PostProcessStage",(m=B("PostProcessStage"),m(v=function(e){function r(){var e,t;i(this,r);for(var a=arguments.length,u=new Array(a),o=0;o<a;o++)u[o]=arguments[o];return(t=n(this,(e=s(r)).call.apply(e,[this].concat(u))))._psos=[],t._renderers=[],t._renderCommands=[],t._SSAA=1,t._originFrameBuffer=null,t}return t(r,e),a(r,[{key:"activate",value:function(e){u(s(r.prototype),"activate",this).call(this,e),this.createCmdBuffer()}},{key:"destroy",value:function(){this._cmdBuff&&(this._cmdBuff.destroy(),this._cmdBuff=null)}},{key:"sortRenderQueue",value:function(){var e=this._opaqueInstancedQueue,r=this._opaqueBatchedQueue;e.clear(),r.clear(),this._renderQueues.forEach(this.renderQueueClearFunc);for(var t=this._pipeline.renderObjects,i=0;i<t.length;++i){var n=t[i];if(n.model.isDynamicBatching)for(var s=n.model.subModels,a=0;a<s.length;++a)for(var u=s[a],o=u.passes,d=0;d<o.length;++d){var h=o[d],l=u.psos[d];if(h.instancedBuffer)h.instancedBuffer.merge(u,n.model.instancedAttributes,l),e.queue.add(h.instancedBuffer);else if(h.batchedBuffer)h.batchedBuffer.merge(u,n,l),r.queue.add(h.batchedBuffer);else for(var f=0;f<this._renderQueues.length;f++)this._renderQueues[f].insertRenderPass(n,a,d)}else for(var c=0;c<n.model.subModelNum;c++)for(var p=0;p<n.model.getSubModel(c).passes.length;p++)for(var _=0;_<this._renderQueues.length;_++)this._renderQueues[_].insertRenderPass(n,c,p)}this._renderQueues.forEach(this.renderQueueSortFunc)}},{key:"render",value:function(e){var r=this._cmdBuff;this.sortRenderQueue(),r.begin();var t=e.camera;S[0].a=t.clearColor.a,S[0].r=t.clearColor.r,S[0].g=t.clearColor.g,S[0].b=t.clearColor.b;var i=t.viewport;this._renderArea.x=i.x*t.width,this._renderArea.y=i.y*t.height;var n=e.window.framebuffer;0!==this._renderCommands.length?(n=this._originFrameBuffer,this._renderArea.width=t.width*this.SSAA,this._renderArea.height=t.height*this.SSAA):(this._renderArea.width=t.width,this._renderArea.height=t.height),r.beginRenderPass(n,this._renderArea,t.clearFlag,S,t.clearDepth,t.clearStencil);for(var s=0;s<this._renderQueues.length;s++)r.execute(this._renderQueues[s].cmdBuffs.array,this._renderQueues[s].cmdBuffCount);this._opaqueInstancedQueue.recordCommandBuffer(r),this._opaqueBatchedQueue.recordCommandBuffer(r),r.endRenderPass();var a=this._renderCommands;if(0!==a.length)for(var u=this._pipeline.quadIA,o=0;o<a.length;o++)this._renderArea.width=t.width,this._renderArea.height=t.height,(n=a[o].output)||(n=e.window.framebuffer),r.beginRenderPass(n,this._renderArea,p.ALL,[{r:0,g:0,b:0,a:1}],1,0),r.bindPipelineState(this._psos[o]),r.bindBindingLayout(this._psos[o].pipelineLayout.layouts[0]),r.bindInputAssembler(u),r.draw(u),r.endRenderPass();r.end(),A.length=0,A[0]=r,this._device.queue.submit(A)}},{key:"resize",value:function(e,r){}},{key:"update",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._renderers=e,r!==this._SSAA&&(this._SSAA=r,this._originFrameBuffer&&this._originFrameBuffer.destroy(),this._originFrameBuffer=null),this.rebuild()}},{key:"rebuild",value:function(){this._psos.length=0;var e=this._renderCommands;e.length=0;for(var r=!1,t=this._renderers,i=0;i<t.length;i++){var n=this.renderers[i];if(n&&n.enabled){r=!0;break}}if(r){var s=this._pipeline;this._originFrameBuffer||(this._originFrameBuffer=g(this._pipeline,this._device,!0,this.SSAA));for(var a,u,d,h=this._framebuffer=this._originFrameBuffer,l=h.colorViews[0],f=s.globalBindings.get(b.BLOCK.name),c=new Map,p=0;p<t.length;p++){var _=this.renderers[p];if(_&&_.enabled)for(var m=_.commands,v=0;v<m.length;v++){var B=m[v],A=B.pass;A.bindBuffer(b.BLOCK.binding,f.buffer);var S=A.getBinding("pe_origin_texture");if(S&&A.bindTextureView(S,l),B.inputCommands)for(var w=0;w<B.inputCommands.length;w++){var C=B.inputCommands[w].outputName,F=A.getBinding(C);if(F){var Q=c.get(C);Q?A.bindTextureView(F,Q.colorViews[0]):cc.warn("Can not find input frame buffer for input name [".concat(C,"] in post process renderer [").concat(o(_),"]"))}else cc.warn("Can not find input name [".concat(C,"] for post process renderer [").concat(o(_),"]"))}var P=a||h,R=A.getBinding("pe_input_texture");R&&A.bindTextureView(R,P.colorViews[0]),u||(u=g(this._pipeline,this._device)),e.push(new y(A,P,u)),B.outputName&&(c.set(B.outputName,u),u=null),d=a,a=u,u=d;var k=A.createPipelineState();k.pipelineLayout.layouts[0].update(),A.update(),this._psos.push(k)}}e.length>0&&(e[e.length-1].output=null)}}},{key:"renderers",get:function(){return this._renderers},set:function(e){this._renderers=e,this.rebuild()}},{key:"SSAA",get:function(){return this._SSAA},set:function(e){this._SSAA=e,this.rebuild()}}]),r}(_))||v)),f.on(c.EVENT_BEFORE_SCENE_LAUNCH,(function(){var e=f.root.pipeline.getFlow("PostProcessFlow");e&&(e.stages[0].renderers=[])})),d._RF.pop()}}}));

System.register("chunks:///shader-lib/post-process/post-process.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc","./post-process-renderer.js","./post-process-stage.js"],(function(e,t){var r,s,o,i,n,a,c,p,u,d,l,_,f,h,y,g,S,v,A,P,b,m,w,O,j,k,D;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,s=e.inherits,o=e.classCallCheck,i=e.possibleConstructorReturn,n=e.getPrototypeOf,a=e.initializerDefineProperty,c=e.assertThisInitialized,p=e.createClass},function(e){u=e.cclegacy,d=e._decorator,l=e.Material,_=e.director,f=e.Component},function(e){h=e.default},function(e){y=e.PostProcessStage}],execute:function(){u._RF.push({},"a903fE0W+VGtrSBe5BmmOL+","post-process",void 0),O=d.ccclass,j=d.property,k=d.type,D=d.executeInEditMode,e("PostProcess",(g=O("PostProcess"),S=k(h),v=k(h),A=k(l),g(P=D((m=r((b=function(e){function t(){var e,r;o(this,t);for(var s=arguments.length,p=new Array(s),u=0;u<s;u++)p[u]=arguments[u];return(r=i(this,(e=n(t)).call.apply(e,[this].concat(p))))._stage=null,a(r,"_renderers",m,c(r)),a(r,"_SSAA",w,c(r)),r}return s(t,e),p(t,[{key:"start",value:function(){var e=_.root.pipeline.getFlow("PostProcessFlow");e&&(this._stage=e.stages.find((function(e){return e instanceof y})),this._updateStage())}},{key:"_updateStage",value:function(){this._stage&&(this._stage.renderers=this._renderers,this._stage.update(this.renderers,this.SSAA))}},{key:"renderers",get:function(){return this._renderers},set:function(e){this._renderers=e,this._updateStage()}},{key:"materials",get:function(){return this._renderers.map((function(e){return e.material}))},set:function(e){this._renderers.forEach((function(t,r){t._updateMaterial(e[r])})),this._updateStage()}},{key:"SSAA",get:function(){return this._SSAA},set:function(e){this._SSAA=e,this._updateStage()}}]),t}(f)).prototype,"_renderers",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r(b.prototype,"renderers",[v],Object.getOwnPropertyDescriptor(b.prototype,"renderers"),b.prototype),r(b.prototype,"materials",[A],Object.getOwnPropertyDescriptor(b.prototype,"materials"),b.prototype),w=r(b.prototype,"_SSAA",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),r(b.prototype,"SSAA",[j],Object.getOwnPropertyDescriptor(b.prototype,"SSAA"),b.prototype),P=b))||P)||P)),u._RF.pop()}}}));

System.register("chunks:///_virtual/prerequisite-imports:main",["../examples/water/water/test-water.js","../main-menu/scripts/scenelist.js","../main-menu/scripts/backbutton.js","../main-menu/scripts/listitem.js","../shader-lib/depth-buffer/depth-buffer-component.js","../shader-lib/utils/frame-buffer.js","../shader-lib/depth-buffer/depth-buffer-ubo.js","../shader-lib/depth-buffer/depth-buffer-stage.js","../shader-lib/post-process/editor/post-process-renderer-materials.js","../shader-lib/post-process/post-process-command.js","../shader-lib/post-process/post-process-flow.js","../shader-lib/post-process/post-process-renderer.js","../shader-lib/post-process/post-process-stage.js","../shader-lib/post-process/post-process.js"],(function(s,e){return{setters:[function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/examples/water/water/test-water.js', 'chunks:///examples/water/water/test-water.js');
  r('project:///assets/main-menu/scripts/scenelist.js', 'chunks:///main-menu/scripts/scenelist.js');
  r('project:///assets/main-menu/scripts/backbutton.js', 'chunks:///main-menu/scripts/backbutton.js');
  r('project:///assets/main-menu/scripts/listitem.js', 'chunks:///main-menu/scripts/listitem.js');
  r('project:///assets/shader-lib/depth-buffer/depth-buffer-component.js', 'chunks:///shader-lib/depth-buffer/depth-buffer-component.js');
  r('project:///assets/shader-lib/utils/frame-buffer.js', 'chunks:///shader-lib/utils/frame-buffer.js');
  r('project:///assets/shader-lib/depth-buffer/depth-buffer-ubo.js', 'chunks:///shader-lib/depth-buffer/depth-buffer-ubo.js');
  r('project:///assets/shader-lib/depth-buffer/depth-buffer-stage.js', 'chunks:///shader-lib/depth-buffer/depth-buffer-stage.js');
  r('project:///assets/shader-lib/post-process/editor/post-process-renderer-materials.js', 'chunks:///shader-lib/post-process/editor/post-process-renderer-materials.js');
  r('project:///assets/shader-lib/post-process/post-process-command.js', 'chunks:///shader-lib/post-process/post-process-command.js');
  r('project:///assets/shader-lib/post-process/post-process-flow.js', 'chunks:///shader-lib/post-process/post-process-flow.js');
  r('project:///assets/shader-lib/post-process/post-process-renderer.js', 'chunks:///shader-lib/post-process/post-process-renderer.js');
  r('project:///assets/shader-lib/post-process/post-process-stage.js', 'chunks:///shader-lib/post-process/post-process-stage.js');
  r('project:///assets/shader-lib/post-process/post-process.js', 'chunks:///shader-lib/post-process/post-process.js');
  r('virtual:///prerequisite-imports:main', 'chunks:///_virtual/prerequisite-imports:main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    var _m;
    return {
        setters: [function(m) { _m = m; }],
        execute: function () { _export(_m); }
    };
    });
});